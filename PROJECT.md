## 小猪存钱罐项目文档

### 1) 定位与目标

面向“储蓄用户”的自动化存钱产品：把家庭储蓄/定投变成可配置规则，并在满足条件时**自动执行**（存入、swap、锁定、提前取回处罚）。同时用“小猪养成”做行为反馈与轻科普，帮助家庭形成长期储蓄习惯。

### 2) 用户与场景

* 用户：家庭（父母/小孩共同使用），但所有规则与费用口径**统一按储蓄用户**定义。
* 场景：按时间/价格/市场条件自动存钱；随时查看资产与计划执行；必要时提前取回但有成本。

### 3) MVP 核心体验

* 用户创建一个“存钱计划”（规则）→ 绑定钱包 → 系统按规则**自动执行**链上动作 → Dashboard 展示结果 → 小猪状态随储蓄变化。
* 取回资金：支持“正常取回”与“提前取回”，其中**提前取回扣 5%（仅针对储蓄本金）**。

### 4) 功能需求

1. **规则化存钱（自动执行）**

* 规则类型（可组合）：

  * 固定周期：每日/每周/每月定额存入（DCA）
  * 条件触发：价格阈值/区间、市场状态等
  * 固定日期：例如每月发薪日
* 执行动作：

  * 存入到“小猪金库”（锁定）
  * 必要时先 **swap** 成目标资产再存入

2. **Portfolio Dashboard**

* 总资产、已锁定/可用、计划列表与执行日志（什么时候触发、触发原因、交易哈希）
* 小猪视觉化状态：胖度=金额；活跃度=连续执行/互动频率；支持简单对话互动（可选）

3. **出入金（仅界面演示）**

* 仅做 UI Flow/占位，不接真实 MoonPay/Stripe 等通道；用于展示未来能力与路径，不进入 MVP 集成范围。

### 5) 链上与合约（EVM）

* 合约核心：**Lock（锁定）**

  * 记录每笔储蓄的本金与锁定条件
  * 取回逻辑：

    * 正常取回：按规则允许解锁后全额本金取回
    * 提前取回：允许强制取回，但对**本金扣 5%**（罚金去向/归集方式可后续定义）
* 说明：**暂不考虑多签**，权限模型走单钱包/单账户路径。

### 6) 自动执行机制

* 需要“链上条件 + 定时/触发器 + 交易提交者”
* 实现可选（不限定）：

  * Keeper/Automation 网络（例如通用的自动化执行服务）
  * 自建 relayer + 定时任务（更灵活但要承担可用性与安全）
* 原则：执行可追溯（日志/哈希）、可回放（规则与输入固定）、可中止（用户暂停计划）。

### 7) AI 模块（Gemini）

* 作用：用于“市场状态判断/解释/提示”，并给用户可读的触发原因与风险提醒；但因为你要求“自动执行”，AI 输出必须落到**可验证的规则参数**上（避免不可解释的黑箱直接下单）。

### 8) 非目标与未来演进

* 非目标（现在不做）：提现手续费（20%那条先忽略）、投资收益口径、真实法币出入金集成、多签。
* 未来：将资产进一步存入链上 DeFi（如 Aave）以获取收益（届时需要新增风险提示、策略选择、清算/利率波动处理、合约审计与权限隔离等）。
